<% provide(:title, 'User Page') %>

<div class="container main">
  <div class="row">
    <div class="col-md-3" id="profile">
      <div class="profile-container">
        <h3 class="profile-name"><%= @user.name %></h3>

          <%= render 'info', user: @user %>

          <!--DM用-->
         
          <% unless @user.id == current_user.id %>
          <% if current_user != @user && current_user.following?(@user) && @user.following?(current_user) %>
         
              <% if @isRoom == true %>
                <p class="user-show-room"><a href="/rooms/<%= @roomId %>" class="btn btn-outline-danger chat">Go to Chat Room</a>
              <% else %>
                <%= form_for @room do |f| %>
                  <%= fields_for @entry do |e| %>
                    <%= e.hidden_field :user_id, value: @user.id %>
              <% end %>
                <%= f.submit "Start Chatting", class:"btn btn-outline-danger user-show-chat chat"%>
              <% end %>
            <% end %>
          <% end %>
        <% end %>

      </div>
    </div>

    <div class="col-md-8 .offset-md-1" id="post">
      <div class="row">
        <% @posts.each do |post| %>
        <div>
          <div class="card">
            <div class="card-header">
                <%= link_to post_path(post.id) do %>
                  <p>Title：<%= post.title %></p>
                <% end %>
            </div>
            <div class="card-body">
              <h5 class="card-title">Contents of Activities：<%= post.body %></h5>
              <%= attachment_image_tag post, :image, format: 'jpeg', size: "250x250" %>
              <p class="card-text">
                <span>Category:
                  <% post.categories.each do |category| %>
                  <%= category.name %>
                  <% end %>
                </span>
              </p>
               <p>Posted by<font size="4">&nbsp;<%= @user.name %></font>&nbsp;
                <span class="date">on <%= post.created_at.strftime('%Y/%m/%d') %></span>
               </p> 
            </div>
            </div>    
          </div>
        <% end %>
      </div>
    </div>
  </div>
</div>


<style>
  #post {
    text-align: center;
  
  }

  #profile {
    text-align: center;
  }

  .main {
    margin-top: 50px;
  }
  
  .card {
    margin: 30px;
  }
  
  
  .chat {
     margin: 30px;
   }
  
</style>